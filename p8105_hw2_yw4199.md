p8105_hw2_yw4199
================
Yaduo Wang
2023-10-01

\#Problem 2

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

``` r
trash_data = read_excel("data_files/Trash_Collection_Data.xlsx", sheet = 1, skip = 1)
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
#specify the sheet in the Excel file and to omit non-data entries
trash_data = janitor::clean_names(trash_data)
#use reasonable variable names

view(trash_data)

Mr.trash = 
  trash_data |> 
  select(dumpster:homes_powered) |> 
  drop_na(dumpster) |> 
#omit rows that do not include dumpster-specific data
  mutate(homes_powered = weight_tons*500/30)
#Update the data to include a new homes_powered variable based on this calculation.
```

``` r
Pro_data = read_excel("data_files/Trash_Collection_Data.xlsx", sheet = 2, skip = 1)
#specify the sheet in the Excel file and to omit non-data entries
Pro_data = janitor::clean_names(Pro_data)
#use reasonable variable names
view(Pro_data)

Pro.trash = 
  Pro_data |> 
  select(dumpster:homes_powered) |> 
  drop_na(dumpster) |> 
#omit rows that do not include dumpster-specific data
  mutate(homes_powered = weight_tons*500/30)
#Update the data to include a new homes_powered variable based on this calculation.
view(Pro.trash)
```

``` r
Gwy_data = read_excel("data_files/Trash_Collection_Data.xlsx", sheet = 4, skip = 1)
#specify the sheet in the Excel file and to omit non-data entries
Gwy_data = janitor::clean_names(Gwy_data)
#use reasonable variable names
view(Gwy_data)

Gwy.trash = 
  Gwy_data |> 
  select(dumpster:homes_powered) |> 
  drop_na(dumpster) |> 
#omit rows that do not include dumpster-specific data
  mutate(homes_powered = weight_tons*500/30)
#Update the data to include a new homes_powered variable based on this calculation.
view(Gwy.trash)
```

Combine all three datasets.

``` r
#add an additional variable to all datasets before combining
Mr.trash = 
  Mr.trash |> 
  mutate(name_sheet = "Mr.Trash Wheel")
Pro.trash = 
  Pro.trash |> 
  mutate(name_sheet = "Professor Trash Wheel") 
Gwy.trash = 
  Gwy.trash |> 
  mutate(name_sheet = "Gwynnda Trash Wheel") 

#keep the variable type constant
Mr.trash$year = as.numeric(Mr.trash$year)
Pro.trash$year = as.numeric(Pro.trash$year)
Gwy.trash$year = as.numeric(Gwy.trash$year)
```

``` r
#combine all three datasets
three_tidy = 
  bind_rows(Mr.trash, Pro.trash, Gwy.trash) |>
  janitor::clean_names()
view(three_tidy)
```

Description of the data

``` r
sum_weight_Professor = filter(three_tidy, name_sheet == "Professor Trash Wheel")
sum_gwy = filter(three_tidy, 
                 month == "July", year == 2021, name_sheet =="Gwynnda Trash Wheel")
```

This new dataset contains 747 rows, and 16 columns. The columns in this
dataset include: dumpster, month, year, date, weight_tons,
volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts,
glass_bottles, grocery_bags, chip_bags, sports_balls, homes_powered,
name_sheet, plastic_bags. The total weight of trash collected by
Professor Trash Wheel is 190.12. The total number of cigarette butts
collected by Gwynnda in July of 2021 is 1.63^{4}.

\#Problem 3

``` r
#Import and clean the dataset. 
baseline_initial = 
  read_csv(file = "MCI_baseline.csv", skip = 1)|>
  janitor::clean_names()
```

    ## Rows: 483 Columns: 6
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): Age at onset
    ## dbl (5): ID, Current Age, Sex, Education, apoe4
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#tidy the dataset
baseline_data = 
  baseline_initial |> 
  mutate(sex = 
      case_match(
        sex, 
        1 ~ "male", 
        0 ~ "female"),
    sex = as.factor(sex)) |> 
   mutate(apoe4 = 
      case_match(
        apoe4, 
        1 ~ "APOE4 carrier", 
        0 ~ "APOE4 non-carrier"),
    apoe4 = as.factor(apoe4)) |> 
  #appropriate encoded of sex and APOE4 carrier status
  subset(current_age < age_at_onset | age_at_onset == ".") 
  #remove any participants who do not meet the stated inclusion criteria
view(baseline_data)

baseline_data_onset = 
  baseline_data |> 
  filter(age_at_onset != ".") |> 
  view()
```

``` r
APOE4_carriers = 
  baseline_data |> 
  filter(apoe4 == "APOE4 carrier") 
```

First, we import data in the form of csv file, and we dropped the first
row. We use reasonable variable names. We apply the appropriate encoded
for sex and APOE4 carrier status variables. Then, we remove any
participants whose current_age is larger than age_at_onset. There are483
participants recruited, and 479 participants who meet the stated
inclusion criteria. There are 93 participants develop MCI. The average
baseline age is 70.4064516. The proportion of women in the study who are
APOE4 carriers is 0.3006263.

``` r
amyloid_data = 
  read_csv(file = "mci_amyloid.csv", skip = 1) |> 
  janitor::clean_names() |> 
  rename("id" = "study_id") |> 
  drop_na() |> 
  filter(baseline!="Na") |> 
  pivot_longer(
    baseline:time_8,
    names_to = "period", 
    values_to = "values") |> 
  view()  
```

    ## Rows: 487 Columns: 6
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (5): Baseline, Time 2, Time 4, Time 6, Time 8
    ## dbl (1): Study ID
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unique_baseline <- setdiff(baseline_data$id, amyloid_data$id)
unique_biomarker <- setdiff(amyloid_data$id, baseline_data$id)
```

Check whether some participants appear in only the baseline or amyloid
datasets, and comment on your findings. Combine the demographic and
biomarker datasets so that only participants who appear in both datasets
are retained, and briefly describe the resulting dataset; export the
result as a CSV to your data directory.

``` r
combined_data <- merge(baseline_data, amyloid_data, by = "id", all = FALSE)
write.csv(combined_data, "combined_dataset.csv", row.names = FALSE)
```
